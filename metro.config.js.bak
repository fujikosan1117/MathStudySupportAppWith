const { getDefaultConfig } = require('expo/metro-config');

const config = getDefaultConfig(__dirname);

// デフォルトの blockList に backend/ を追加（上書きではなくマージ）
const defaultBlockList = config.resolver.blockList;
const backendPattern = /backend\/.*/;

if (defaultBlockList instanceof RegExp) {
  // デフォルトが単一の RegExp の場合、両方を組み合わせる
  config.resolver.blockList = [defaultBlockList, backendPattern];
} else if (Array.isArray(defaultBlockList)) {
  config.resolver.blockList = [...defaultBlockList, backendPattern];
} else {
  config.resolver.blockList = [backendPattern];
}

module.exports = config;
